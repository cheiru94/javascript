<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <form action="" id="form">
    <input type="text" id="input">
    <button>í™•ì¸</button>
  </form>
  <div id="logs">

  </div>
  <script>
    const $input = document.querySelector('#input');
    const $form = document.querySelector('#form');
    const $logs = document.querySelector('#logs');
/*    const numbers = [];
     for(let n = 1; n<=9; n+=1){
      numbers.push(n);
    } */

    // getRNum(n,m): nì´ìƒ mì´í•˜
    const getRNum = (n,m)=> Math.floor(
                           Math.random() *
                           (m-n+1)
                         )+n;  

    const numbers = Array(9).fill().map((v,i)=>i+1);
    //console.log(numbers); // numbers - [1,2,3,4,5,6,7,8,9]
    const answer = [];
    

    for(let n=0;n<4;n+=1){
      //const index = getRNum(0,8);  // undefined ìƒì„±ê°€ëŠ¥
      const index = getRNum(0,numbers.length-1);
      answer.push(numbers[index]);
      numbers.splice(index,1); // ë°°ì—´ì—ì„œ indexìœ„ì¹˜ì— 1ê°œë¥¼ ì‚­ì œ
      //console.log(numbers);
      //console.log(answer);
    }

    const sidoArr = []; // ì‹œë„í•œ ì…ë ¥ê°’ ì €ì¥
    const checkInput = (input)=>{  // ë¬¸ì¥ì—´ input
      if(input.length !==4 ){  // ê¸¸ì´ 4ê°œì˜ ìˆ«ìë¥¼ ë¬¸ìì—´ë¡œ ì…ë ¥ ì•ˆí•œ ê²½ìš°
        return alert('ë˜‘ë”” ëª»í•˜ë‚˜? 4ìë¦¬ ìˆ«ìë¡œ ì…ë ¥í•´ë¼');
      }
      if ((new Set(input)).size !==4){  // 4ê°œì˜ ìˆ«ìì¤‘ì— ì¤‘ë³µëœ ìˆ«ìê°€ ìˆëŠ” ê²½ìš°
        return alert('ì¤‘ë³µí•˜ì§€ë§ë€ë§ì´ì•¼!');
      }
      if(sidoArr.includes(input)){  // ì´ë¯¸ ì‹œë„í•œ ì…ë ¥ì²´í¬
        return alert('ì •ì‹  ëª»ì°¨ë¼ë¦¬ë‚˜? ì´ë¯¸ ì‹œë„í•œê±°');
      }
      return true;
    };

    $form.addEventListener(
      'submit',  // enterí‚¤ ëˆŒëŸ¬ ìš”ì²­ ì²˜ë¦¬ ê°€ëŠ¥
      (event)=>{
        event.preventDefault(); // ë””í´íŠ¸ ì²˜ë¦¬ë¥¼ ì¤‘ì§€
        // submitì˜ ë””í´íŠ¸ ì²˜ë¦¬: actionì†ì„±ì˜ ì£¼ì†Œë¡œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  í™”ë©´ ìƒˆë¡œê³ ì¹¨: í™”ë©´ ì´ˆê¸°í™”
        const value = $input.value;
        $input.value='';
        const valid = checkInput(value);
        //console.log(valid);
        if(!valid) return;
        console.log(answer);
        if(answer.join('') === value){
          $logs.textContent = 'í™ˆëŸ°ì…ë‹ˆë‹¤.';
          return;
        }
        if(sidoArr.length>10){
          const msg = document.createTextNode(`íŒ¨ë°°! ì •ë‹µ: ${anwser.join('')}`);
          $logs.appendChild(msg);
          //$logs.textContent = `íŒ¨ë°°! ì •ë‹µ: ${anwser.join('')}`;
          return;
        }

        let nOfStrike = 0;
        let nOfBall = 0;

        // ğŸ”´ğŸ”´ğŸ”´ğŸ”´ğŸ”´ğŸ”´ğŸ”´ğŸ”´ for ë¬¸ì„ -> forEachë¡œ ë°”ê¿”ë¼ , ì„œë¡œ í˜•íƒœë¥¼ ë°”ê¿”ë¼ , ğŸ”´ì‹œí—˜ğŸ”´ 

        // ğŸŸ¡ 1. for ğŸŸ¡
        /* for (let i = 0;i<answer.length;i++){
          const index = value.indexOf(answer[i]);
          if(index>-1){  // indexOf() ëª»ì°¾ìœ¼ë©´ -1 ë°˜í™˜, ì°¾ìœ¼ë©´ í•´ë‹¹í•˜ëŠ” indexë²ˆí˜¸ê°’ ë°˜í™˜
            if(index===i){
              nOfStrike++;
            }else{
              nOfBall++;
            }
          }
        } */

        // ğŸŸ¡ 2. forEachìˆ˜ì •í•˜ê¸° ğŸŸ¡ 
        answer.forEach((answerValue,answerIndex)=>{  // êµê³¼ì„œì—ëŠ” answerValueë¥¼ numberë¡œ
          const index = value.indexOf(String(answerValue));
          // String(): ë¬¸ìì—´ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
          // Number(): ìˆ«ìê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ 
          // Date(), Array() ... 
          if(index>-1){  // indexOf() ëª»ì°¾ìœ¼ë©´ -1 ë°˜í™˜, ì°¾ìœ¼ë©´ í•´ë‹¹í•˜ëŠ” indexë²ˆí˜¸ê°’ ë°˜í™˜
            if(index===answerIndex){
              nOfStrike++;
            }else{
              nOfBall++;
            }
          }
        })
        // ğŸš© ë°°ì—´ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë§‰ê°•í•˜ê¸° ë•Œë¬¸ì— forë¬¸ ëŒ€ì‹ ì— ë°°ì—´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ í¸ë¦¬í•˜ë‹¤ ğŸš©        


        $logs.append(`${value}: ${nOfStrike} ìŠ¤íŠ¸ë¼ì´í¬ ${nOfBall} ë³¼`,document.createElement('br'));

        sidoArr.push(value);  // ì‹œë„íšŸìˆ˜ 1ì¶”ê°€ 
      }
    );
      if (condition) {
        
      }



  </script>
  
</body>
</html>