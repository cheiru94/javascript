<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ê°€ìœ„ë°”ìœ„ë³´</title>
  <style>
    #computer {
      width: 142px;
      height: 200px;
    }
  </style>
</head>



<body>

  <!-- 1. computer -->
  <div id="computer"></div>

  <!-- 2 btns-->
  <div>
    <button id="scissors" class="btn">ê°€ìœ„</button>
    <button id="rock" class="btn">ë°”ìœ„</button>
    <button id="paper" class="btn">ë³´</button>
  </div>

  <!-- 3. score -->
  <div id="score">
  </div>




  <script>

    const $computer = document.querySelector('#computer'); // ì»´í“¨í„° ë¬µì°Œë¹  ì´ë¯¸ì§€  ( ì¡¸ë¼ ë¹ ë¥´ê²Œ ëŒì•„ê°€ëŠ” ê·¸ ì´ë¯¸ì§€)
     
    const $rock = document.querySelector('#rock');
    const $scissors = document.querySelector('#scissors');
    const $paper = document.querySelector('#paper');
    
    const $score = document.querySelector('#score');   /// ë°‘ì— ì ìˆ˜
    
    const IMG_URL = './img/rsp.png';   // ì´ë¯¸ì§€ url

    /*     const scissorsX = '0';
        const rockX = '-220px';
        const paperX = '-440px'; */
        


    // ===> ê°â­ì²´ë¡œ í‘œí˜„â­
    const rspX = {
      scissors: '0',   // key:value
      rock: '-220px',
      paper: '-440px',
    };

    /*ğŸ“Œ  1 . ì¬ê·€í•¨ìˆ˜ */
    let computerChoice = 'scissors'; // ê°€ìœ„
    /* const changeComputerHand = () =>{
      if(computerChoice === 'rock'){
        computerChoice = 'scissors';
        //$computer.style.background = `url(${IMG_URL}) ${scissorsX} 0`;
      }else if(computerChoice === 'scissors'){
        computerChoice = 'paper';
      }else if(computerChoice === 'paper'){
        computerChoice = 'rock';
      }
      $computer.style.background = `url(${IMG_URL}) ${rspX[computerChoice]} 0`;
      //$computer.style.background = `url(${IMG_URL}) ${scissorsX} 0`;
      $computer.style.backgroundSize = 'auto 200px'; // width, height
      
      //  ì¬ê·€í˜¸ì¶œ
      setTimeout(changeComputerHand,500); // 0.05ì´ˆì— changeComputerHand()í˜¸ì¶œ
    };
    
    setTimeout(changeComputerHand,500); */
    // /1 . ì¬ê·€í•¨ìˆ˜ 

    /* ğŸ“ŒğŸ“Œ 2. 1ì˜ ì¬ê·€ í•¨ìˆ˜ë¥¼ ì´ë ‡ê²Œ setIntervalë¡œ ëŒ€ì²´  */  // ë¬µì°Œë¹  ë°”ê¾¸ê¸°ë§Œ í•˜ì§€ , ì‹œê°„ì ì¸ ê°œë…ì€ ì—†ë‹¤. ë‹¨ìˆœíˆ ë¬µì°Œë¹ ë§Œ ë°”ê¿ˆ 1íšŒì ìœ¼ë¡œ 
    const changeComputerHand = () => {
      if (computerChoice === 'rock') {
        computerChoice = 'scissors';
        //$computer.style.background = `url(${IMG_URL}) ${scissorsX} 0`;
      } else if (computerChoice === 'scissors') {
        computerChoice = 'paper';
      } else if (computerChoice === 'paper') {
        computerChoice = 'rock';
      }                                              // â­â­â­â­â­â­â­â­
      $computer.style.background = `url(${IMG_URL}) ${rspX[computerChoice]} 0`;
      //$computer.style.background = `url(${IMG_URL}) ${scissorsX} 0`;
      $computer.style.backgroundSize = 'auto 200px'; // width, height
    };

    // â­â­â­â­â­â­â­â­â­â­â­â­â­â­â­â­â­0.5 ì´ˆ ê°„ê²©ìœ¼ë¡œ changeComputerHandí•¨ìˆ˜ ì‹¤í–‰ â­â­â­â­â­â­â­â­â­â­â­â­â­â­â­â­â­â­
    let intervalId = setInterval(changeComputerHand, 50);
    // /2. 1ì˜ ì¬ê·€ í•¨ìˆ˜ë¥¼ ì´ë ‡ê²Œ setIntervalë¡œ ëŒ€ì²´  



    /* ğŸŸ¢ì²« ë²ˆì§¸ í•´ê²° ë°©ë²• */
    /* const clickBtn = (e) => {
        clearInterval(intervalId);     => 101 ë¼ì¸ = let intervalId = setInterval(changeComputerHand, 50);
        $scissors.removeEventListener('click', clickBtn); // í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì·¨ì†Œ 
        $rock.removeEventListener('click', clickBtn);
        $paper.removeEventListener('click', clickBtn);

      setTimeout(() => {  
        //  ìœ„ì—ì„œ ì§€ì› ë˜ê±° ë‹¤ì‹œ ë¶™ì—¬ì¤˜ì•¼ ë²„íŠ¼ ëˆ„ë¥´ê³  ë‚œ í›„ì— ë‹¤ì‹œ ì›€ì§ì¸ë‹¤.
        $scissors.addEventListener('click', clickBtn);  // í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë“±ë¡
        $rock.addEventListener('click', clickBtn);
        $paper.addEventListener('click', clickBtn);

        intervalId = setInterval(changeComputerHand, 500);
      }, 2000);
    };


    // $scissors.addEventListener('click', clickBtn); // í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë“±ë¡ 
    // $rock.addEventListener('click', clickBtn);
    // $paper.addEventListener('click', clickBtn); */



    /* ğŸŸ¢ë‘ ë²ˆì§¸ í•´ê²° ë°©ë²• */
    let flagClickable = true;

     /* ğŸŸ¢ğŸŸ¢ğŸŸ¢ğŸŸ¢ğŸŸ¢ğŸŸ¢ğŸŸ¢ */ 
    const scoreTable = {
      rock:0,       
      scissors:1,      
      paper:-1,        
    }


    let score = 0;
    const clickBtn = (e) => {
      //  flagClickable === true
      if (flagClickable) {  // ì´ë ‡ê²Œ flagë¥¼ ì´ìš©í•´ì„œ ì¡°ì ˆí•  ìˆ˜ë„ ìˆë‹¤. 
        flagClickable = false;
        clearInterval(intervalId);

        const myChoice = e.target.textContent === 'ê°€ìœ„' ? 'scissors' : e.target.textContent === 'ë°”ìœ„'
            ? 'rock'
            : 'paper'; // ì¤‘ì²© ì¡°ê±´ ì—°ì‚°ì

        // p.297 ë‚´ìš© êµ¬í˜„ : ìŠ¹íŒ¨ ì—¬ë¶€ í‘œì‹œ ê°€ëŠ¥

        // ë¶„ì„ : ìŠ¹íŒ¨ ì ìˆ˜í™” 
        // ê°€ìœ„: 1, ë°”ìœ„: 0, ë³´: -1
        // ë‚´ì„ íƒ - ì»´í“¨í„° ì„ íƒ : -2 ~ 2 ê¹Œì§€ ë‚˜íƒ€ë‚œë‹¤

        /* 
            ë‚˜/ì»´í“¨í„°   ê°€ìœ„   ë°”ìœ„   ë³´            ì´ê¹€ : 2 , -1
              ê°€ìœ„      0       1     2            ë¹„ê¹€ : 0
              ë°”ìœ„     -1       0     1            íŒ¨ë°° : 1 , -2
              ë³´       -2      -1     0
        */

        
        /* ğŸŸ¢ğŸŸ¢ğŸŸ¢ğŸŸ¢ğŸŸ¢ğŸŸ¢ğŸŸ¢ */ 
        const myScore = scoreTable[myChoice]; // . ì²˜ë¦¬ë¥¼ í•˜ë©´ ì—ëŸ¬ !!!! myChoiceë¼ëŠ” ë©¤ë²„ê°€ ì—†ê¸° ë–„ë¬¸
        const computerScore = scoreTable[computerChoice]
        const diff = myScore - computerScore;

        /* if (diff===2 || diff===-1) {console.log('ë§ˆ ì´ê¹„ë„¤ ì¶•í•˜í•œë‹¤');} // if ([2,-1].includes(diff))
        else if(diff===-2 || diff===1){console.log('ë§ˆ ì§“ë„¤ ë¨¸í•˜ë…¸');}
        else {console.log('ë¹„ê¹„ë„¤');} */
      
        let msg = '';

        if ([2,-1].includes(diff)){
          // ì´ê¹€ 
          score++;
          msg='ì´ê¹„ë„¤ ì¶•í•˜í•œë‹¹';
        } else if ([-2,1].includes(diff)) {
          // íŒ¨ë°°
          score--;
          msg='ì§“ë„¤ ë¨¸í•˜ë…¸';
        } else {
          msg='ë¬´ìŠ¹ë¶€!';
        }


        $score.textContent = `${msg} ì´:${score}ì `;


        setTimeout(() => {
          flagClickable = true;
          intervalId = setInterval(changeComputerHand, 50);
        }, 1000);
      }



    };


    $scissors.addEventListener('click', clickBtn); // í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë“±ë¡ 
    $rock.addEventListener('click', clickBtn);
    $paper.addEventListener('click', clickBtn);

  </script>

</body>

</html>