<!DOCTYPE html>

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ëë§ì‡ê¸°</title>
</head>



<!-- ğŸ”´ HTML ğŸ”´ -->

<body>
  <div><span id="order">1</span>ë²ˆì§¸ ì°¸ê°€ì</div>
  <div>ì œì‹œì–´: <span id="word"></span></div>
  <input type="text">
  <button>ì…ë ¥</button>



  <!-- ğŸŸ¡ JAVASCRIPT ğŸŸ¡ -->
  <script>
    const nOfPlayer = Number(prompt('ëª‡ëª…ì´ ì°¸ê°€í•  ê±´ì§€ìš”?'));
    const $input = document.querySelector('input');
    const $button = document.querySelector('button');
    const $word = document.querySelector('#word');   // spaníƒœê·¸ ì—˜ë¦¬ë¨¼íŠ¸ ì„ íƒ
    const $order = document.querySelector('#order');
    let jesiWord;  // ì´ˆê¸°ê°’ undefined
    let inputtedWord; // ê²Œì„ ì°¸ê°€ìê°€ ì…ë ¥í•œ ë‹¨ì–´ ì €ì¥




    $button.addEventListener(  // ì´ë²¤íŠ¸ì˜ ë“±ë¡
      'click',
      (event) => {
        //console.log('ë²„íŠ¼ ëˆ„ë¦„2');
        if (!jesiWord) { // ìµœì´ˆ ì‹¤í–‰ì‹œ !undefined, ì œì‹œì–´ê°€ ë¹„ì–´ìˆë‹¤.
          //  ì…ë ¥í•œ ë‹¨ì–´ë¥¼ ì œì‹œì–´ë¡œ ì €ì¥í•œ í›„ í™”ë©´ì— í‘œì‹œ

          jesiWord = inputtedWord;  // ì…ë ¥í•œ ë‹¨ì–´ë¥¼ ì œì‹œì–´ë¡œ ì €ì¥
          $word.textContent = jesiWord;  //í™”ë©´ì— í‘œì‹œ

          /* const order = Number($order.innerHTML);
          if(order+1>nOfPlayer){
            $order.innerHTML = 1;
          }else{
            $order.innerHTML = order+1;
          } */
          let order = Number($order.innerHTML);
          $order.innerHTML = (order++) % nOfPlayer + 1;

          $input.value = '';
          $input.focus();


        } else {  // ì œì‹œì–´ê°€ ë¹„ì–´ ìˆì§€ì•Šë‹¤
          // ì…ë ¥í•œ ë‹¨ì–´ê°€ ì˜¬ë°”ë¥¸ì§€ êµ¬í˜„
          if (jesiWord[jesiWord.length - 1] === inputtedWord[0]) {
            // ì…ë ¥ë‹¨ì–´ê°€ ì˜¬ë°”ë¦„
            //           alert('ì˜¬ë°”ë¦„');

            jesiWord = inputtedWord;  // ì…ë ¥í•œ ë‹¨ì–´ë¥¼ ì œì‹œì–´ë¡œ ì €ì¥
            $word.textContent = jesiWord;  //í™”ë©´ì— í‘œì‹œ

            /*             const order = Number($order.innerHTML);
                        if(order+1>nOfPlayer){
                          $order.innerHTML = 1;
                        }else{
                          $order.innerHTML = order+1;
                        } */
            let order = Number($order.innerHTML);
            $order.innerHTML = (order++) % nOfPlayer + 1;


            $input.value = '';
            $input.focus();

          } else {
            // ì…ë ¥ë‹¨ì–´ê°€ í‹€ë¦¼
            alert('í‹€ë¦¼');


            $input.value = '';
            $input.focus();

          }


        }
      }
    );
    $input.addEventListener(
      'input',
      (event) => {
        //console.log('ì´ë²¤íŠ¸ê°€ ë°œìƒí•œ ì—˜ë¦¬ë¨¼íŠ¸ ',event.target);
        console.log('ì…ë ¥í•œ ê¸€ì ', event.target.value);
        inputtedWord = event.target.value;
      }
    );
  </script>


</body>

</html>